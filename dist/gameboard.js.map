{"version":3,"sources":["src/assetloader.js","src/bezier-easing.js","src/index.js","src/input.js","src/key.js","src/log.js","src/loop.js","src/math/clamp.js","src/math/inverselerp.js","src/math/lerp.js","src/root.js","src/timer.js","src/tween.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA;AACA;AACA;AACA;AACA;AACA;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dist/gameboard.js","sourcesContent":["udefine('gameboard/assetloader', ['root', 'eventmap', './log'], function(root, EventMap, Log) {\n\n  var audioTypes = {\n    'mp3': 'audio/mpeg',\n    'wav': 'audio/wav',\n    'ogg': 'audio/ogg'\n  };\n\n  var imageTypes = {\n    'png': 'image/png',\n    'jpg': 'image/jpg',\n    'gif': 'image/gif'\n  };\n\n  var AssetLoader = function(assets) {\n    EventMap.mixin(this, AssetLoader.prototype);\n\n    this.assets = assets || {};\n    this.files = {};\n\n    this.maxAssets = 0;\n    this.assetsLoaded = 0;\n    this.percentLoaded = 0;\n  };\n\n  AssetLoader.prototype.start = function() {\n    if (assets == null) {\n      return;\n    }\n\n    this.trigger('start');\n\n    var loadingProgress = function() {\n\n      var percentLoaded = 100;\n\n      if (currentProgress !== totalSize) {\n        percentLoaded = currentProgress / totalSize;\n      }\n\n      self.trigger('progress', percentLoaded);\n\n      if (currentProgress >= totalSize) {\n        self.trigger('complete');\n      }\n    };\n\n    var loadSuccess = function(iterator) {\n      return function() {\n        currentProgress += iterator.size;\n        self.assetsLoaded++;\n\n        loadingProgress();\n      };\n    };\n\n    var loadError = function(iterator) {\n      return function(err) {\n        Log.e('Error while loading ' + iterator.name + ': ' + err);\n      };\n    };\n\n    if (Object.keys(this.assets) > 0) {\n      Object.keys(this.assets).forEach(function(key) {\n        var value = this.assets[key];\n\n        if (value.files == null || !Array.isArray(value.files) || value.files.length === 0) {\n          return true;\n        }\n\n        self.maxAssets += value.files.length;\n\n        for (var i = 0, j = value.files.length; i < j; i++) {\n          (function(iterator) {\n            // Handle images here\n            if (iterator.type.indexOf('image') === 0) {\n              // TODO: Reflect: Does it make sense to put the cached images into an object?\n              var img = new root.Image();\n              img.onload = loadSuccess(iterator);\n              img.onerror = loadError(iterator);\n\n              img.src = iterator.name;\n            } else {\n              // Handle audio here\n              if (iterator.type.indexOf('audio') === 0) {\n                // TODO: Save preloaded files in the AudioManager\n                var audioType = iterator.name.split('.').pop();\n                var audio = new root.Audio();\n                if (supportedTypes[audioType] && audio.canPlayType(supportedTypes[audioType])) {\n                  audio.addEventListener('canplaythrough', loadSuccess(iterator));\n                  audio.onerror = loadError(iterator);\n\n                  audio.src = iterator.name;\n                  audio.load();\n                } else {\n                  Log.w('Skipped unsupported audio file (' + supportedTypes[audioType] + ') ' + iterator.name);\n                  loadSuccess(iterator)();\n                }\n              } else {\n                Log.w('Skipped file ' + iterator.name + ': Not an audio or image file');\n              }\n            }\n\n          })(value.files[i]);\n        }\n\n      }, this);\n    }\n  };\n\n  return AssetLoader;\n\n});\n","/**\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 – MIT License\n *\n * Credits: is based on Firefox's nsSMILKeySpline.cpp\n * Usage:\n * var spline = BezierEasing(0.25, 0.1, 0.25, 1.0)\n * spline(x) => returns the easing value | x must be in [0, 1] range\n *\n */\n(function (definition) {\n  if (typeof exports === \"object\") {\n    module.exports = definition();\n  }\n  else if (typeof window.define === 'function' && window.define.amd) {\n    window.define('gameboard/bezier-easing', [], definition);\n  } else {\n    window.BezierEasing = definition();\n  }\n}(function () {\n  var global = this;\n\n  // These values are established by empiricism with tests (tradeoff: performance VS precision)\n  var NEWTON_ITERATIONS = 4;\n  var NEWTON_MIN_SLOPE = 0.001;\n  var SUBDIVISION_PRECISION = 0.0000001;\n  var SUBDIVISION_MAX_ITERATIONS = 10;\n\n  var kSplineTableSize = 11;\n  var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\n  var float32ArraySupported = 'Float32Array' in global;\n\n  function BezierEasing (mX1, mY1, mX2, mY2) {\n    // Validate arguments\n    if (arguments.length !== 4) {\n      throw new Error(\"BezierEasing requires 4 arguments.\");\n    }\n    for (var i=0; i<4; ++i) {\n      if (typeof arguments[i] !== \"number\" || isNaN(arguments[i]) || !isFinite(arguments[i])) {\n        throw new Error(\"BezierEasing arguments should be integers.\");\n      } \n    }\n    if (mX1 < 0 || mX1 > 1 || mX2 < 0 || mX2 > 1) {\n      throw new Error(\"BezierEasing x values must be in [0, 1] range.\");\n    }\n\n    var mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n   \n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\n    function C (aA1)      { return 3.0 * aA1; }\n   \n    // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\n    function calcBezier (aT, aA1, aA2) {\n      return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\n    }\n   \n    // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\n    function getSlope (aT, aA1, aA2) {\n      return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n    }\n\n    function newtonRaphsonIterate (aX, aGuessT) {\n      for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\n        if (currentSlope === 0.0) return aGuessT;\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n        aGuessT -= currentX / currentSlope;\n      }\n      return aGuessT;\n    }\n\n    function calcSampleValues () {\n      for (var i = 0; i < kSplineTableSize; ++i) {\n        mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n      }\n    }\n\n    function binarySubdivide (aX, aA, aB) {\n      var currentX, currentT, i = 0;\n      do {\n        currentT = aA + (aB - aA) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\n        if (currentX > 0.0) {\n          aB = currentT;\n        } else {\n          aA = currentT;\n        }\n      } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n      return currentT;\n    }\n\n    function getTForX (aX) {\n      var intervalStart = 0.0;\n      var currentSample = 1;\n      var lastSample = kSplineTableSize - 1;\n\n      for (; currentSample != lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\n        intervalStart += kSampleStepSize;\n      }\n      --currentSample;\n\n      // Interpolate to provide an initial guess for t\n      var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\n      var guessForT = intervalStart + dist * kSampleStepSize;\n\n      var initialSlope = getSlope(guessForT, mX1, mX2);\n      if (initialSlope >= NEWTON_MIN_SLOPE) {\n        return newtonRaphsonIterate(aX, guessForT);\n      } else if (initialSlope == 0.0) {\n        return guessForT;\n      } else {\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize);\n      }\n    }\n\n    var _precomputed = false;\n    function precompute() {\n      _precomputed = true;\n      if (mX1 != mY1 || mX2 != mY2)\n        calcSampleValues();\n    }\n\n    var f = function (aX) {\n      if (!_precomputed) precompute();\n      if (mX1 === mY1 && mX2 === mY2) return aX; // linear\n      // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n      if (aX === 0) return 0;\n      if (aX === 1) return 1;\n      return calcBezier(getTForX(aX), mY1, mY2);\n    };\n\n    f.getControlPoints = function() { return [{ x: mX1, y: mY1 }, { x: mX2, y: mY2 }]; };\n    var str = \"BezierEasing(\"+[mX1, mY1, mX2, mY2]+\")\";\n    f.toString = function () { return str; };\n\n    return f;\n  }\n\n  // CSS mapping\n  BezierEasing.css = {\n    \"ease\":        BezierEasing(0.25, 0.1, 0.25, 1.0),\n    \"linear\":      BezierEasing(0.00, 0.0, 1.00, 1.0),\n    \"ease-in\":     BezierEasing(0.42, 0.0, 1.00, 1.0),\n    \"ease-out\":    BezierEasing(0.00, 0.0, 0.58, 1.0),\n    \"ease-in-out\": BezierEasing(0.42, 0.0, 0.58, 1.0)\n  };\n\n  return BezierEasing;\n\n}));\n","udefine('gameboard', ['gameboard/assetloader', 'gameboard/input', 'gameboard/loop', 'gameboard/log', 'gameboard/timer'], function(AssetLoader, Input, Loop, Log, Timer) {\n  \n  return {\n    AssetLoader: AssetLoader,\n    Input: Input,\n    Loop: Loop,\n    Log: Log,\n    Timer: Timer\n  };\n  \n});\n","udefine('gameboard/input', ['root', 'eventmap', 'gameboard/key'], function(root, EventMap, Key) {\r\n\r\n  var Input = {};\r\n\r\n  Input.define = Key.define;\r\n  Input.key = new EventMap();\r\n\r\n  root.addEventListener('keydown', function(evt) {\r\n    Input.key.trigger({\r\n      name: 'down',\r\n      context: Key\r\n    }, evt.keyCode);\r\n  }, true);\r\n  \r\n  root.addEventListener('keyup', function(evt) {\r\n    Input.key.trigger({\r\n      name: 'up',\r\n      context: Key\r\n    }, evt.keyCode);\r\n  }, true);\r\n\r\n  return Input;\r\n});\r\n","udefine('gameboard/key', function() {\r\n  'use strict';\r\n  \r\n  var Key = {\r\n    'backspace': 8,\r\n    'tab': 9,\r\n    'enter': 13,\r\n    'shift': 16,\r\n    'ctrl': 17,\r\n    'alt': 18,\r\n    'escape': 27,\r\n    'left': 37,\r\n    'up': 38,\r\n    'right': 39,\r\n    'down': 40,\r\n    'insert': 45,\r\n    'delete': 46,\r\n    '0': 48,\r\n    '1': 49,\r\n    '2': 50,\r\n    '3': 51,\r\n    '4': 52,\r\n    '5': 53,\r\n    '6': 54,\r\n    '7': 55,\r\n    '8': 56,\r\n    '9': 57,\r\n    'a': 65,\r\n    'b': 66,\r\n    'c': 67,\r\n    'd': 68,\r\n    'e': 69,\r\n    'f': 70,\r\n    'g': 71,\r\n    'h': 72,\r\n    'i': 73,\r\n    'j': 74,\r\n    'k': 75,\r\n    'l': 76,\r\n    'm': 77,\r\n    'n': 78,\r\n    'o': 79,\r\n    'p': 80,\r\n    'q': 81,\r\n    'r': 82,\r\n    's': 83,\r\n    't': 84,\r\n    'u': 85,\r\n    'v': 86,\r\n    'w': 87,\r\n    'x': 88,\r\n    'y': 89,\r\n    'z': 90,\r\n    'numpad0': 96,\r\n    'numpad1': 97,\r\n    'numpad2': 98,\r\n    'numpad3': 99,\r\n    'numpad4': 100,\r\n    'numpad5': 101,\r\n    'numpad6': 102,\r\n    'numpad7': 103,\r\n    'numpad8': 104,\r\n    'numpad9': 105,\r\n    'f1': 112,\r\n    'f2': 113,\r\n    'f3': 114,\r\n    'f4': 115,\r\n    'f5': 116,\r\n    'f6': 117,\r\n    'f7': 118,\r\n    'f8': 119,\r\n    'f9': 120,\r\n    'f10': 121,\r\n    'f11': 122,\r\n    'f12': 123,\r\n    'semiColon': 186,\r\n    'equalSign': 187,\r\n    'comma': 188,\r\n    'dash': 189,\r\n    'period': 190,\r\n    'forwardSlash': 191,\r\n    'openBracket': 219,\r\n    'backSlash': 220,\r\n    'closeBraket': 221,\r\n    'singleQuote': 222\r\n  };\r\n  \r\n  Key.define = function(name, key) {\r\n    if (name == null || key == null) {\r\n      return;\r\n    }\r\n    \r\n    if (!Object.hasOwnProperty.call(Key, name)) {\r\n      if (typeof key === 'function') {\r\n        Object.defineProperty(Key, name, {\r\n          get: key\r\n        });\r\n      } else {\r\n        Key[name] = key;        \r\n      }\r\n    }\r\n  };\r\n\r\n  return Key;\r\n\r\n});","define('gameboard/log', ['root'], function(root) {\n  'use strict';\n  /**\n   * @module gameboard/log\n   * @requires root\n   */\n  \n  /**\n   * @class\n   * @alias module:gameboard/log\n   */\n  var Log = (function() {\n\n    var Log = {};\n\n    Log.connector = null;\n\n    Log.plugins = {};\n\n    Log.plugins.console = {\n      e: function() {\n        if (root.console && root.console.error) {\n          return root.console.error.apply(console, arguments);\n        }\n      },\n      w: function() {\n        if (root.console && root.console.warn) {\n          return root.console.warn.apply(console, arguments);\n        }\n      },\n      i: function() {\n        if (root.console && root.console.info) {\n          return root.console.info.apply(console, arguments);\n        }\n      },\n      d: function() {\n        if (root.console && root.console.log) {\n          return root.console.log.apply(console, arguments);\n        }\n      },\n      v: function() {\n        if (root.console && root.console.log) {\n          return root.console.log.apply(console, arguments);\n        }\n      }\n    };\n\n    Log.connector = Log.plugins.console;\n\n    Log.logLevelMap = {\n      'error': ['e'],\n      'warn': ['w', 'e'],\n      'info': ['i', 'w', 'e'],\n      'debug': ['d', 'i', 'w', 'e'],\n      'verbose': ['v', 'd', 'i', 'w', 'e']\n    };\n\n    Log.logLevel = 'verbose';\n\n    var logFunctions = ['v', 'd', 'i', 'w', 'e'];\n\n    for (var i = 0, j = logFunctions.length; i < j; i++) {\n\n      (function(iterator) {\n        Log[iterator] = function() {\n          if (Log.logLevelMap[Log.logLevel].indexOf(iterator) >= 0) {\n            Log.connector[iterator].apply(this, arguments);\n          }\n        };        \n      })(logFunctions[i]);\n      \n    }\n\n    return Log;\n\n  })();\n\n  return Log;\n});","udefine('gameboard/loop', ['requestanimationframe', 'eventmap', 'performance', 'gameboard/timer'], function(requestAnimationFrame, EventMap, performance, Timer) {\n  \n  /**\n   * @module gameboard/loop\n   */\n  \n  'use strict';\n  \n  var loopEvents = new EventMap();\n  var pausedEvents = {};\n  var timers = [];\n  \n  /**\n   * @class Loop\n   * @static \n   */\n  return (function() {\n\n    var isRunning = true;\n\n    /**\n     * @method run \n     */\n    var run = function() {\n      var time;\n\n      (function loop() {\n        requestAnimationFrame(loop);\n\n        var now = performance.now();\n        var dt = now - (time || now);\n\n        time = now;\n\n        if (!isRunning) {\n          return;\n        }\n        \n        timers.forEach(function(timer) {\n          timer.tick(now);\n        });\n\n        var eventKeys = Object.keys(loopEvents.events.listeners);\n        \n        for (var i = 0, j = eventKeys.length; i < j; i++) {\n          (function(key) {\n            if (!pausedEvents[key]) {\n              loopEvents.trigger(key, dt);\n            }\n          })(eventKeys[i]);\n        }\n      })();\n    };\n\n    /**\n     * @method stop \n     */\n    var stop = function() {\n      isRunning = false;\n    };\n\n    var clear = function() {\n      loopEvents.clear();\n      pausedEvents = {};\n    };\n    \n    var on = function(taskName, taskFunction) {\n      loopEvents.on(taskName, taskFunction);\n      pausedEvents[taskName] = false;\n    };\n    \n    var off = function(taskName) {\n      loopEvents.off(taskName);\n      if (pausedEvents[taskName] != null) {\n        delete pausedEvents[taskName];        \n      }\n    };\n\n    var pause = function(taskName) {\n      pausedEvents[taskName] = true;\n    };\n\n    var resume = function(taskName) {\n      if (taskName == null) {\n        isRunning = true;\n        return;\n      }\n      \n      pausedEvents[taskName] = false;\n    };\n    \n    var createTimer = function(interval) {\n      var timer = new Timer(interval);\n      timers.push(timer);\n      \n      return timer;\n    };\n\n\n    return {\n      run: run,\n      \n      stop: stop,\n      clear: clear,\n      \n      on: on,\n      off: off,\n      \n      pause: pause,\n      resume: resume,\n      \n      createTimer: createTimer\n    };\n  })();\n  \n});\n","udefine('clamp', function() {\n  'use strict';\n  \n  var clamp = function(value, min, max) {\n    var _ref, _ref1, _ref2;\n    if ( typeof value === 'object') {\n      _ref = value, min = _ref.min, max = _ref.max, value = _ref.value;\n    }\n    if (Array.isArray(min)) {\n      _ref1 = min, min = _ref1[0], max = _ref1[1];\n    }\n    if (min == null) {\n      min = 0.0;\n    }\n    if (max == null) {\n      max = 1.0;\n    }\n    if (min > max) {\n      _ref2 = [max, min], min = _ref2[0], max = _ref2[1];\n    }\n    if ((min <= value && value <= max)) {\n      return value;\n    } else {\n      if (value > max) {\n        return max;\n      } else {\n        return min;\n      }\n    }\n  };\n\n  return clamp;\n});\n","udefine('inverselerp', ['lerp'], function(lerp) {\n\treturn function(min, max, amt) {\n\t\treturn max - lerp(min, max, amt);\n\t};\n});\n","udefine('lerp', ['clamp'], function(clamp) {\n\treturn function(min, max, amt) {\n    var tmpAmt = clamp(amt, 0.0, 1.0);\n    var diff = Math.abs(max - min);\n    \n    if (diff === 0) {\n    \treturn min;\n    } else {\n    \treturn min + (diff * tmpAmt);\n    }\n\t};\n});\n","(function(root) {\n  'use strict';\n  \n  define('root', function() {\n    return root;\n  });\n})(this);","udefine('gameboard/timer', ['eventmap', 'performance'], function(EventMap, performance) {\n\n  var Timer = function(interval) {\n    EventMap.mixin(this, Timer.prototype);\n    \n    var self = this;\n\n    this.interval = interval || 1000;\n    this.startTime = -1;\n\n    this.active = false;\n    this.paused = false;\n\n    var oldTicks = 0;\n\n    this.tick = function(currentTime) {\n      if (!self.active || self.paused) {\n        return;\n      }\n      \n      if (interval <= 0) {\n        return;\n      }\n\n      self.trigger('tick', currentTime);\n\n      if ((currentTime - self.startTime - self.interval) > oldTicks) {\n        oldTicks = currentTime;\n        self.trigger('interval');\n      }\n    };\n  };\n\n  Timer.prototype.start = function() {\n    this.active = true;\n    this.paused = false;\n\n    this.startTime = performance.now();\n\n    this.trigger('start');\n  };\n\n  Timer.prototype.pause = function() {\n    this.paused = true;\n\n    this.trigger('pause');\n  };\n\n  Timer.prototype.unpause = function() {\n    this.paused = false;\n\n    this.trigger('unpause');\n  };\n\n  Timer.prototype.stop = function() {\n    this.paused = false;\n    this.active = false;\n\n    this.trigger('stop');\n  };\n  \n  return Timer;\n\n});\n","udefine('gameboard/tween', ['eventmap', 'gameboard/bezier-easing', 'gameboard/loop'], function(EventMap, BezierEasing, Loop) {\r\n\r\n  var Tween = function() {\r\n    EventMap.mixin(this, Tween.prototype);\r\n    \r\n    this.target = null;\r\n  };\r\n\r\n  Tween.prototype.animate = function(property, end, time, easing) {\r\n    var self = this;\r\n    \r\n    if (this.target && typeof this.target[property] === 'number') {\r\n      var start = this.target[property];\r\n      \r\n      if (start === end) {\r\n        this.trigger('start');\r\n        this.trigger('end');\r\n        return;\r\n      }\r\n      \r\n      easing = easing || 'linear';\r\n\r\n      var timer = Loop.createTimer();\r\n      \r\n      timer.interval = time;\r\n      \r\n      timer.on('start', function() {\r\n        self.trigger('start');\r\n      });\r\n      \r\n      timer.start();\r\n      \r\n      timer.on('tick', function(ticks) {\r\n        var multiplicator = BezierEasing.css[easing](ticks / (timer.startTime + timer.interval));\r\n        var points = (end - start) * multiplicator;\r\n        \r\n        if (points > end) {\r\n          points = end;\r\n        }\r\n        \r\n        self.target[property] = points;\r\n        self.trigger('animate', points);\r\n      });\r\n      \r\n      timer.on('interval', function() {\r\n        timer.stop();\r\n        self.target[property] = end;\r\n        self.trigger('end');\r\n      });\r\n\r\n    }\r\n  };\r\n\r\n  return Tween;\r\n\r\n});\r\n"]}